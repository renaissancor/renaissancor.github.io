## 라이브러리 연결 (DLL)

* **WinAPI와 DLL**: Windows API 함수들은 대부분 `.dll` 파일에 구현되어 있습니다. 예를 들어, `timeBeginPeriod()`는 `WinMM.dll`에 속하며, `GetTickCount()`나 `Sleep()` 같은 기본 함수들은 `Kernel32.dll` 등 핵심 시스템 DLL에 포함되어 있습니다.
* **링커 설정**: Visual Studio에서 프로젝트를 빌드할 때, **링커 > 입력 > 추가 종속성**에 필요한 `.lib` 파일을 추가하여 `.dll`을 연결할 수 있습니다. `timeapi.h` 같은 헤더 파일을 사용하면 `#pragma comment(lib, "winmm.lib")`를 통해 자동으로 링크를 설정할 수도 있습니다.
* **정적/동적 연결**:
    * **정적 연결(`/MT`, `/MTd`)**: 런타임 라이브러리 코드가 실행 파일 내부에 포함되어 배포가 편리합니다.
    * **동적 연결(`/MD`, `/MDd`)**: 런타임 라이브러리 코드가 `.dll`로 분리되어 실행 시점에 로드됩니다. 파일 크기가 작고 메모리를 절약할 수 있지만, 해당 DLL이 설치되어 있어야 합니다.

---

## 게임 서버 분산과 네트워크

* **엔드포인트(Endpoint)**: 유저가 접속하는 서버의 IP 주소와 포트입니다.
* **로드 밸런싱**: 여러 서버에 접속 부하를 분산시키는 기술입니다. 일반적으로 유저 요청을 받아 적절한 서버로 연결해 주는 **프록시 서버**나 **L4 스위치**를 활용합니다.
* **Proxy Server**: 실제 게임 서버의 IP 주소를 숨기고, 유저에게는 프록시 서버의 IP만 노출하여 **디도스(DDoS) 공격**을 방어하는 데 사용됩니다. 공격자가 프록시 서버를 공격하면 다른 서버는 영향을 받지 않으며, 공격당하는 서버의 IP를 변경하여 빠르게 대응할 수 있습니다.

---

## 게임 서버 아키텍처

* **지역별 분산**: 넓은 게임 월드를 여러 지역으로 나누어 각각의 서버가 특정 지역을 담당합니다. 유저가 지역 경계를 넘으면 다른 서버로 **재연결(Reconnection)**됩니다. 이는 네트워크 트래픽과 CPU 부하를 분산하는 데 효과적입니다.
* **기능별 분산**: 채팅, 거래소, 길드 등 특정 기능을 분리하여 전용 서버에서 처리하는 방식입니다. 이는 메인 게임 서버의 부하를 줄이지만, 비동기 처리가 필수적이라 설계가 복잡합니다.
* **월드와 DB**:
    * **월드(World)**: 게임 세계의 논리적인 단위로, 일반적으로 **하나의 서버 프로세스**가 하나의 월드를 담당합니다.
    * **데이터베이스(DB)**: 게임 데이터(유저 정보, 아이템, 상태 등)를 저장하는 곳입니다. DB의 **동시 접속 부하**가 게임 서버의 성능을 제한하는 주요 원인 중 하나입니다.
* **직렬 처리**: MMO 게임은 유저 간 실시간 상호작용이 많아, 데이터의 일관성 유지를 위해 DB에 대한 작업이 **순서대로(직렬적)** 처리되어야 합니다. 이는 DB의 처리 속도가 CPU 연산 속도에 비해 매우 느리기 때문에 병목 현상을 일으킵니다.
* **채널 시스템**:
    * **개념**: 하나의 월드를 여러 개의 복제된 채널로 나누어, 더 많은 유저를 수용하는 방식입니다.
    * **목적**: DB의 부하를 분산하는 것이 주요 목적입니다. 각 채널은 동일한 데이터를 사용하는 것이 아니라, 독립된 공간에서 운영되므로 DB에 대한 부하를 분산시킬 수 있습니다.
* **데디케이티드 서버(Dedicated Server)**:
    * **의미**: 한 게임을 위해 독립적으로 실행되는 서버 프로세스입니다.
    * **MO 게임**: 배틀그라운드나 오버워치 같은 MO(Multiplayer Online) 게임에서 한 판이 시작될 때마다 전용 서버 프로세스가 생성되어 게임이 종료될 때까지 운영됩니다.

---

## 기타 논의 사항

* **P2P 게임**: 클라이언트 간 직접 통신으로 게임이 진행되며, 중앙 게임 서버가 따로 없는 방식입니다.
* **패치/로그인 서버**: 게임 서버와 별도로 운영되며, HTTP 기반의 웹 서버를 사용해 업데이트나 로그인 인증을 처리합니다.
* **CDN**: 대용량 파일 다운로드(패치 등)를 위해 사용되는 서버로, 전 세계에 분산되어 있어 유저에게 가장 가까운 서버에서 빠르게 데이터를 전송합니다.
* **클라이언트 개발**: 서버 개발자는 클라이언트의 네트워크 파트를 담당하는 경우가 많으며, 테스트를 위해 클라이언트 코드를 다룰 줄 알아야 합니다.